## APP 
## Compile for ARMv6
docker run -v "/Users/zacharykent/code/ztkent/sunlight-meter":/usr/src/myapp -w /usr/src/myapp arm32v6/golang:1.21-alpine sh -c 'apk update && apk add gcc && CGO_ENABLED=1 GOOS=linux GOARCH=arm GOARM=6 go build -v -o slm'
## Test

##CLIENT
# First, always update
sudo apt update

## Auth GitHub
sudo apt install gh
gh auth login

## Setup the app
cd /home/sunlight
mkdir sunlight-meter
cd sunlight-meter

## Setup Golang
wget https://go.dev/dl/go1.21.11.linux-armv6l.tar.gz
sudo rm -rf /usr/local/go && sudo tar -C /usr/local -xzf go1.21.11.linux-armv6l.tar.gz && rm go1.21.11.linux-armv6l.tar.gz
echo "export PATH=\$PATH:/usr/local/go/bin" >> ~/.bashrc
source ~/.bashrc

## Add OBEXD
sudo apt install bluez-obexd
echo 'export PATH=$PATH:/usr/libexec/bluetooth/' >> ~/.bashrc
source ~/.bashrc

## Build the app
go build -v -o slm

## Schedule it to always run at boot
obexd -a -n -r /home/sunlight/sunlight-meter
./slm